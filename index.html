<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>Money Money Come Come ðŸ’¸ â€” Bigwin Sayar! (Premium)</title>
  <meta name="description" content="Premium Big/Small prediction with pro UI" />
  <meta name="keywords" content="ck, lottery, wingo, big small, premium, prediction" />

  <!-- Firebase (Compat for Realtime Database v9) -->
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-database-compat.js"></script>

  <!-- Icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>

  <style>
    :root{
      --bg-main:#07070c;
      --glass:#0f0f17cc;
      --border:#2b2b3b;
      --text:#e9e9f4;
      --sub:#a6a6bf;
      --muted:#7a7a93;

      --gold:#ffd54d;
      --gold-2:#ffb84d;
      --neon:#00ffb2;
      --pill-big:#ffa500;
      --pill-small:#00aaff;

      --card-grad: linear-gradient(145deg, #151524 0%, #0b0b14 100%);
      --glow: 0 0 28px rgba(255, 213, 77, .3);
      --soft: 0 10px 35px rgba(0,0,0,.5);
      --blur: blur(14px);

      --tr: .35s cubic-bezier(.4,0,.2,1);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family: ui-sans-serif, -apple-system, Segoe UI, Inter, Roboto, "SF Pro Display", system-ui, Arial;
      background: radial-gradient(1000px 600px at 30% -10%, #191933 0%, #07070c 55%);
      color: var(--text);
      min-height:100vh;
      overflow-x:hidden;
    }

    .wrap{
      max-width:1100px;
      margin:28px auto;
      padding: 16px;
    }

    /* PRO HEADER */
    .pro-header{
      position: relative;
      border-radius: 22px;
      padding: 28px 22px;
      background: var(--glass);
      backdrop-filter: var(--blur);
      border: 1px solid var(--border);
      box-shadow: var(--soft);
      overflow: hidden;
      margin-bottom: 16px;
    }
    .pro-header::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(600px 160px at 15% 0%, rgba(255,213,77,.18), transparent 60%),
        radial-gradient(400px 120px at 85% 0%, rgba(0,255,178,.18), transparent 60%);
      z-index:0; pointer-events:none;
      filter: blur(8px);
    }
    .tag{
      position:relative; z-index:2;
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 12px; border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      color:#dcdcf8; font-size:.9rem; letter-spacing:.3px;
    }
    .title{
      position:relative; z-index:2; margin-top:14px;
      font-weight:900; line-height:1.1;
      font-size: clamp(28px, 4vw, 42px);
      background: linear-gradient(90deg, #ffe38a 0%, #ff9a3c 45%, #fff2c6 80%);
      -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent;
      text-shadow: 0 0 22px rgba(255, 213, 77, .35);
    }
    .subtitle{
      position:relative; z-index:2;
      margin-top:6px; font-size:clamp(18px, 2.5vw, 22px);
      font-weight:800; color:var(--gold);
      text-shadow: 0 0 12px rgba(255, 213, 77, .45);
    }
    .desc{
      position:relative; z-index:2;
      margin-top:6px; color:var(--sub); font-size:1rem;
    }

    .next-box{
      position:relative; z-index:2;
      margin-top:16px;
      display:flex; flex-wrap:wrap; align-items:center; gap:12px;
      padding:14px 16px; border-radius:14px;
      background: linear-gradient(180deg, rgba(0,0,0,.24), rgba(0,0,0,.08));
      border: 1px solid rgba(255,255,255,.08);
    }
    .next-label{ font-weight:800; color:var(--neon); letter-spacing:.3px }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 18px; border-radius:999px; font-weight:800;
      border:2px solid transparent; letter-spacing:.6px;
      text-transform:uppercase; font-size:.95rem;
      transition: transform var(--tr);
    }
    .pill:hover{ transform: translateY(-2px) }
    .pill.big{
      color:var(--pill-big);
      background: rgba(255,165,0,.16);
      border-color: rgba(255,165,0,.45);
      box-shadow: 0 0 16px rgba(255,165,0,.25);
    }
    .pill.small{
      color:var(--pill-small);
      background: rgba(0,170,255,.16);
      border-color: rgba(0,170,255,.45);
      box-shadow: 0 0 16px rgba(0,170,255,.25);
    }
    .conf{
      font-weight:800; font-size:.95rem; color:#d9ffef;
      padding:8px 12px; border-radius:10px;
      border:1px solid rgba(0,255,178,.35);
      background: rgba(0,255,178,.08);
    }

    /* CARD */
    .card{
      background: var(--card-grad);
      border:1px solid var(--border);
      border-radius:18px;
      box-shadow: var(--soft);
      overflow:hidden;
    }
    .card-head{
      display:flex; flex-wrap:wrap; align-items:center; gap:10px;
      justify-content:space-between; padding:14px 16px;
      border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0));
    }
    .card-title{
      display:flex; align-items:center; gap:10px; font-weight:900;
      letter-spacing:.4px; color:#dcdcf8;
    }
    .tools{ display:flex; gap:10px; flex-wrap:wrap }
    .btn{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 14px; border-radius:12px; cursor:pointer;
      border:1px solid rgba(255,255,255,.12);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      color:var(--text); transition: var(--tr);
      font-weight:700; font-size:.92rem;
    }
    .btn:hover{
      border-color: rgba(255, 213, 77, .6);
      box-shadow: var(--glow);
      transform: translateY(-2px);
    }

    .stat{
      padding:12px 16px; color:var(--sub); border-bottom:1px solid var(--border);
      display:flex; flex-wrap:wrap; gap:12px; align-items:center;
    }
    .stat b{ color:#eaf9ff }

    /* TABLE */
    .table-wrap{ overflow:auto }
    table{ width:100%; border-collapse:collapse; min-width:720px }
    thead th{
      position:sticky; top:0; z-index:1;
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0));
      color:#b9b9d6; text-transform:uppercase; font-size:.82rem;
      letter-spacing:.6px; padding:12px; text-align:left; border-bottom:1px solid var(--border);
    }
    tbody td{
      padding:14px 12px; border-bottom:1px solid rgba(255,255,255,.06);
      font-size:.96rem;
    }
    tbody tr:hover{ background: rgba(255,255,255,.03) }
    .issue{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; color:#bcbcd6; font-size:.86rem }
    .win{ color:#00ffaa; font-weight:800; text-shadow: 0 0 10px rgba(0,255,170,.35) }
    .lose{ color:#ff6b6b; font-weight:800; text-shadow: 0 0 10px rgba(255,107,107,.35) }
    .muted{ color:var(--muted); font-size:.86rem }

    /* FOOT */
    .foot{
      margin-top:16px; color:var(--muted); text-align:center; font-size:.92rem
    }

    @media (max-width: 720px){
      .tools{ width:100% }
      .btn{ flex:1; justify-content:center }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- PRO HEADER -->
    <section class="pro-header">
      <span class="tag">
        <i class="fa-solid fa-cat" style="color:var(--gold)"></i>
        Premium Â· Big/Small
      </span>

      <h1 class="title">ðŸ’¸ Money Money Come Come ðŸ’¸</h1>
      <h2 class="subtitle">Bigwin Sayar!</h2>
      <p class="desc">Thank for using.</p>

      <div class="next-box">
        <span class="next-label"><i class="fa-solid fa-forward"></i> Next :</span>
        <span id="next-pill" class="pill">â€”</span>
        <span id="next-issue" class="conf">Issue â€”</span>
      </div>
    </section>

    <!-- TABLE CARD -->
    <section class="card">
      <div class="card-head">
        <div class="card-title">
          <i class="fa-solid fa-bolt"></i>
          <span>Premium</span>
        </div>
        <div class="tools">
          <button id="btnCsv" class="btn">
            <i class="fa-solid fa-file-csv"></i> CSV
          </button>
          <button id="btnJson" class="btn">
            <i class="fa-solid fa-code"></i> JSON
          </button>
        </div>
      </div>

      <div id="stat" class="stat">
        <i class="fa-solid fa-chart-line"></i>
        <span class="muted">Loading analyticsâ€¦</span>
      </div>

      <div class="table-wrap">
        <table>
          <thead>
          <tr>
            <th><i class="fa-solid fa-hashtag"></i> Issue</th>
            <th><i class="fa-solid fa-dice"></i> Number</th>
            <th><i class="fa-solid fa-eye"></i> Actual</th>
            <th><i class="fa-solid fa-brain"></i> Predicted</th>
            <th><i class="fa-solid fa-trophy"></i> Result</th>
            <th><i class="fa-solid fa-signal"></i> Confidence</th>
          </tr>
          </thead>
          <tbody id="tbody">
          <tr>
            <td colspan="6" class="muted" style="text-align:center; padding:36px;">
              <i class="fa-solid fa-brain fa-beat-fade" style="font-size:24px; margin-bottom:8px; display:block; color:var(--gold)"></i>
              Loading premium dataâ€¦
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </section>

    <p class="foot">UI styled with glassmorphism & neon glow â€” Premium unlocked (no key, no timer).</p>
  </div>

  <script>
    /* ===========================
       Firebase (Premium Data Only)
       =========================== */
    const bigwinConfig = {
      apiKey: "AIzaSyArgde3-Xn0boi6FO-ZfN6vPPMRdULPN24",
      authDomain: "bigwin30-3d1e2.firebaseapp.com",
      databaseURL: "https://bigwin30-3d1e2-default-rtdb.europe-west1.firebasedatabase.app/",
      projectId: "bigwin30-3d1e2",
      storageBucket: "bigwin30-3d1e2.appspot.com",
      messagingSenderId: "214823361254",
      appId: "1:214823361254:web:9b9f101f2134e2bc48f927",
      measurementId: "G-E4YSHMD6X4"
    };

    const app = firebase.initializeApp(bigwinConfig, "bigwin-premium-only");
    const db  = firebase.database(app);

    /* ===========================
       Helpers
       =========================== */
    const toBigIntSafe = (x) => {
      const s = String(x).replace(/\D/g,'') || "0";
      try { return BigInt(s); } catch { return 0n; }
    };
    const lastDigit = (n) => {
      const s = String(n).trim();
      const d = parseInt(s[s.length-1], 10);
      return Number.isNaN(d) ? 0 : d;
    };
    const classify = (num) => (lastDigit(num) >= 5 ? "BIG" : "SMALL");
    const pillClass = (v) => v === "BIG" ? "pill big" : "pill small";
    const modBI = (a, m) => { const mm = BigInt(m); let r = a % mm; if (r < 0) r += mm; return r; };

    function downloadFile(filename, content, mime){
      const blob = new Blob([content], {type:mime});
      const url = URL.createObjectURL(blob);
      const a=document.createElement("a");
      a.href=url; a.download=filename; document.body.appendChild(a);
      a.click(); URL.revokeObjectURL(url); a.remove();
    }

    /* ===========================
       Enhanced Premium Prediction
       =========================== */
    function enhancedPrediction(history){
      const recent = history.slice(0, 12);
      let prediction = "";
      let confidence = "Low";

      // Premium results bias
      const premiumResults = recent.filter(r => r.premium && r.premium !== "");
      const premiumWinCount = premiumResults.filter(r => r.result === "Win").length;
      const premiumWinRate = premiumResults.length ? (premiumWinCount / premiumResults.length) : 0;

      if (premiumWinRate > 0.7 && premiumResults.length > 3){
        const lastPremiumWin = premiumResults.find(r => r.result === "Win");
        if (lastPremiumWin){
          prediction = lastPremiumWin.predicted;
          confidence = "Height";
        }
      }

      // Pattern checks
      if (!prediction && recent.length >= 4){
        const last4 = recent.slice(0,4).map(r=>r.actual);
        // same 4 times -> flip
        if (last4.every(v=>v===last4[0])){
          prediction = last4[0] === "BIG" ? "SMALL" : "BIG";
          confidence = "Medium";
        }
        // alternating-ish
        else if (last4[0]!==last4[1] && last4[1]!==last4[2] && last4[2]!==last4[3]){
          prediction = last4[3];
          confidence = "Medium";
        }
      }

      // Distribution / recent wins
      if (!prediction && recent.length >= 6){
        const last6 = recent.slice(0,6).map(r=>r.actual);
        const bigCount = last6.filter(v=>v==="BIG").length;
        const winCount = recent.slice(0,6).filter(r=>r.result==="Win").length;

        if (winCount > 4){
          const lw = recent.find(r=>r.result==="Win");
          if (lw){ prediction = lw.predicted; confidence="Medium"; }
        } else if (bigCount <= 2){
          prediction = "BIG"; confidence="Medium";
        } else if (bigCount >= 4){
          prediction = "SMALL"; confidence="Medium";
        } else {
          prediction = bigCount > 3 ? "SMALL" : "BIG";
          confidence = "Low";
        }
      }

      // Fallback
      if (!prediction){
        const rw = recent.filter(r=>r.result==="Win");
        prediction = rw.length ? rw[0].predicted : (Math.random()>0.5 ? "BIG":"SMALL");
        confidence = "Low";
      }
      return { prediction, confidence };
    }

    /* ===========================
       UI Elements
       =========================== */
    const tbodyEl   = document.getElementById("tbody");
    const statEl    = document.getElementById("stat");
    const nextPill  = document.getElementById("next-pill");
    const nextIssue = document.getElementById("next-issue");
    const btnCsv    = document.getElementById("btnCsv");
    const btnJson   = document.getElementById("btnJson");

    let computedRows = [];
    let headerInfo   = { nextIssue:"", nextPrediction:"", confidence:"" };

    /* ===========================
       Live Data Bind
       =========================== */
    const ref = db.ref("bigwin/default");
    ref.on("value", (snap)=>{
      const v = snap.val();
      if (!v){ return; }

      const raw = Array.isArray(v.list) ? v.list.filter(Boolean)
                 : (v.list && typeof v.list === 'object' ? Object.values(v.list) : []);
      let list = raw.map(it => ({
        issueStr: String(it.issueNumber ?? it.issue ?? it.issue_no ?? "").trim(),
        issueBI : toBigIntSafe(it.issueNumber ?? it.issue ?? it.issue_no ?? ""),
        number  : it.number ?? it.result ?? it.openNumber ?? "",
        premium : it.premium ?? ""
      })).filter(it => it.issueStr.length>0);

      if (list.length===0){
        tbodyEl.innerHTML = `<tr><td colspan="6" class="muted" style="text-align:center; padding:36px;">
          <i class="fa-solid fa-circle-exclamation" style="color:#ffb14d"></i> No premium data yetâ€¦
        </td></tr>`;
        nextPill.textContent = "â€”"; nextPill.className = "pill";
        nextIssue.textContent = "Issue â€”";
        statEl.innerHTML = `<i class="fa-solid fa-chart-line"></i> <span class="muted">No stats</span>`;
        computedRows = [];
        return;
      }

      // Sort newest->oldest for list, then we will compute rows oldest->newest to use history properly
      list.sort((a,b)=> (b.issueBI > a.issueBI ? 1 : -1));

      // Build computed rows (oldest to newest)
      const base = list.map(row => ({
        issue: row.issueStr,
        number: String(row.number),
        actual: classify(row.number),
        predicted: "",
        result: "",
        premium: String(row.premium ?? ""),
        confidence: ""
      })).reverse(); // oldest -> newest

      // compute predictions with history (previous items)
      computedRows = base.map((row, idx, arr)=>{
        const history = arr.slice(0, idx).reverse(); // recent first for our logic
        const pred = enhancedPrediction(history);
        const isWin = (pred.prediction === row.actual);
        return { ...row, predicted: pred.prediction, result: isWin ? "Win" : "Lose", confidence: pred.confidence };
      });

      // render table (newest first for UI)
      const rowsForUi = [...computedRows].reverse();
      tbodyEl.innerHTML = "";
      rowsForUi.forEach((row, i)=>{
        const tr = document.createElement("tr");
        tr.style.animation = `fadeIn .3s ease-out ${i*0.02}s both`;
        const confColor =
          row.confidence==="Height" ? "#00ffb2" :
          row.confidence==="Medium" ? "#ffd54d" : "#9aa1b2";

        tr.innerHTML = `
          <td class="issue">${row.issue}</td>
          <td style="font-weight:700;">${row.number}</td>
          <td><span class="${pillClass(row.actual)}">${row.actual}</span></td>
          <td><span class="${pillClass(row.predicted)}">${row.predicted}</span></td>
          <td class="${row.result==='Win' ? 'win':'lose'}">${row.result}</td>
          <td style="font-weight:800; color:${confColor}; font-size:.9rem;">${row.confidence}</td>
        `;
        tbodyEl.appendChild(tr);
      });

      // Stats
      const total = computedRows.length;
      const wins  = computedRows.filter(r=>r.result==="Win").length;
      const acc   = total ? ((wins/total)*100).toFixed(1) : "0.0";
      statEl.innerHTML =
        `<i class="fa-solid fa-chart-line"></i>
         <span> History â€” </span>
         <b>Win: ${wins}</b>,
         <b>Lose: ${total-wins}</b>
         <span class="muted"> | Accuracy: ${acc}%</span>`;

      // Next prediction from latest state
      const latestIssue = list.reduce((mx, it)=> it.issueBI>mx?it.issueBI:mx, -1n);
      const nextIssueStr = (latestIssue+1n).toString();
      const next = enhancedPrediction([...computedRows].reverse()); // recent first
      headerInfo = { nextIssue: nextIssueStr, nextPrediction: next.prediction, confidence: next.confidence };

      nextPill.textContent = `${next.prediction} (${next.confidence})`;
      nextPill.className = pillClass(next.prediction);
      nextIssue.textContent = `Issue ${nextIssueStr}`;
    });

    /* ===========================
       Export
       =========================== */
    btnCsv.addEventListener("click", ()=>{
      const header = `Next Issue,${headerInfo.nextIssue}\nNext Prediction,${headerInfo.nextPrediction}\nConfidence,${headerInfo.confidence}\n\n`;
      const cols = ["Issue","Number","Actual","Predicted","Result","Confidence","Premium"];
      const rows = [...computedRows].reverse().map(r=>[
        r.issue, r.number, r.actual, r.predicted, r.result, r.confidence, r.premium
      ].map(x => `"${String(x).replace(/"/g,'""')}"`).join(","));
      const csv = header + cols.join(",") + "\n" + rows.join("\n");
      downloadFile(`premium_prediction_${Date.now()}.csv`, csv, "text/csv;charset=utf-8");
    });

    btnJson.addEventListener("click", ()=>{
      const payload = { meta: headerInfo, rows: [...computedRows].reverse() };
      const json = JSON.stringify(payload, null, 2);
      downloadFile(`premium_prediction_${Date.now()}.json`, json, "application/json;charset=utf-8");
    });
  </script>
</body>
</html>
